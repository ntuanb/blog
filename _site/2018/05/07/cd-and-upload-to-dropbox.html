<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Deploy Upload to Dropbox - Blog</title><link rel="stylesheet" href="/css/main.css"><meta name="google-site-verification" content="kfeeGYDzKTHFmlRAJa4qOLf69EM9w4yzLcgcfgdKMEM" /><title>Deploy Upload to Dropbox | Blog</title><meta name="generator" content="Jekyll v3.7.3" /><meta property="og:title" content="Deploy Upload to Dropbox" /><meta property="og:locale" content="en_US" /><meta name="description" content="One of the projects requirements was to upload the project to Dropbox when a new release occurred." /><meta property="og:description" content="One of the projects requirements was to upload the project to Dropbox when a new release occurred." /><link rel="canonical" href="https://blog.tuanb.me/2018/05/07/cd-and-upload-to-dropbox.html" /><meta property="og:url" content="https://blog.tuanb.me/2018/05/07/cd-and-upload-to-dropbox.html" /><meta property="og:site_name" content="Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-05-07T00:00:00+10:00" /><script type="application/ld+json"> {"description":"One of the projects requirements was to upload the project to Dropbox when a new release occurred.","@type":"BlogPosting","url":"https://blog.tuanb.me/2018/05/07/cd-and-upload-to-dropbox.html","headline":"Deploy Upload to Dropbox","dateModified":"2018-05-07T00:00:00+10:00","datePublished":"2018-05-07T00:00:00+10:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.tuanb.me/2018/05/07/cd-and-upload-to-dropbox.html"},"@context":"http://schema.org"}</script></head><body style="background-color: rgb(255, 255, 255)"><script async src="/js/theme.min.js"></script><header> <a href="/"><div class="home"></div></a></header><main> <article><h1 class="post-headline">Deploy Upload to Dropbox</h1><p class="meta"><small>May 07, 2018</small></p><p>One of the projects requirements was to upload the project to Dropbox when a new release occurred.</p><p>The bash script <a href="https://github.com/andreafabrizi/Dropbox-Uploader">Dropbox Uploader</a> on Github was the perfect solution.</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash">scp <span class="nt">-rp</span> ~/clone/<span class="k">*</span> root@192.168.1.1:/var/www/website.com/
curl <span class="s2">"https://raw.githubusercontent.com/andreafabrizi/Dropbox-Uploader/master/dropbox_uploader.sh"</span> <span class="nt">-o</span> dropbox_uploader.sh
<span class="nb">chmod</span> +x dropbox_uploader.sh
<span class="nb">echo</span> <span class="s2">"OAUTH_ACCESS_TOKEN=token"</span> <span class="o">&gt;</span> ~/.dropbox_uploader
./dropbox_uploader.sh <span class="nt">-s</span> <span class="nt">-q</span> <span class="nt">-x</span> node_modules <span class="nt">-x</span> build <span class="nt">-x</span> static/imgs <span class="nt">-x</span> tmp <span class="nt">-x</span> .git upload ~/clone /website</code></pre></figure><p>The Dropbox script also checks checksums to not avoid uploading the same file multiple times by using the <code class="highlighter-rouge">-s</code> command.</p><p><code class="highlighter-rouge">-q</code> allows us to ignore any existing folder creation messages. If upload does not work, remove this parameter for testing.</p><p>Upon testing it out with Codeship, the builds would not finish because the uploader would always try to create new folders, causing errors.</p><p>The code is now updated to zip and upload instead.</p><figure class="highlight"><pre><code class="language-bash" data-lang="bash">...
zip <span class="nt">-r</span> website.zip ~/clone
./dropbox_uploader.sh <span class="nt">-s</span> upload website.zip /website</code></pre></figure><hr class="divider"><div id="disqus_thread"></div><script defer> (function() { var d = document, s = d.createElement('script'); s.src = '//tuanb-me.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })();</script><noscript>Please enable JavaScript to view the comments</noscript> </article></main><footer><div class="links"> <a href="/contact/">Contact</a> <a class="theme" onclick="theme()">Dark/Light</a></div></footer><script src="https://cdn.jsdelivr.net/npm/ga-lite@1/dist/ga-lite.min.js" async></script><script> var galite = galite || {}; galite.UA = 'UA-90397102-1';</script></body></html>
