<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Salesforce Lightning Component Search List - Blog</title><link href="https://fonts.googleapis.com/css?family=Lato:900|Work+Sans" rel="stylesheet"><link rel="stylesheet" href="/css/main.css"><title>Salesforce Lightning Component Search List | Blog</title><meta name="generator" content="Jekyll v3.7.3" /><meta property="og:title" content="Salesforce Lightning Component Search List" /><meta property="og:locale" content="en_US" /><meta name="description" content="This step by step guide is purely for personal learning and is based off another tutorial. The steps will be mostly the same, some copy pasta here and there, along with syntax and variable changes." /><meta property="og:description" content="This step by step guide is purely for personal learning and is based off another tutorial. The steps will be mostly the same, some copy pasta here and there, along with syntax and variable changes." /><link rel="canonical" href="http://localhost:4000/2017/09/07/salesforce-lightning-components-search-list.html" /><meta property="og:url" content="http://localhost:4000/2017/09/07/salesforce-lightning-components-search-list.html" /><meta property="og:site_name" content="Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-09-07T00:00:00+10:00" /><script type="application/ld+json"> {"description":"This step by step guide is purely for personal learning and is based off another tutorial. The steps will be mostly the same, some copy pasta here and there, along with syntax and variable changes.","@type":"BlogPosting","url":"http://localhost:4000/2017/09/07/salesforce-lightning-components-search-list.html","headline":"Salesforce Lightning Component Search List","dateModified":"2017-09-07T00:00:00+10:00","datePublished":"2017-09-07T00:00:00+10:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2017/09/07/salesforce-lightning-components-search-list.html"},"@context":"http://schema.org"}</script></head><body style="background-color: rgb(255, 255, 255)"><script src="/js/theme.min.js"></script><header> <a href="/"><div class="home"></div></a></header><h1 class="post-headline">Salesforce Lightning Component Search List</h1><div class="meta"><span>September 07, 2017</span></div><p>This step by step guide is purely for personal learning and is based off another tutorial. The steps will be mostly the same, some copy pasta here and there, along with syntax and variable changes.</p><p>The original tutorial can be found here <a href="http://developerforce.github.io/lightning-components-tutorial/setup-environment.html">Lightning Components Tutorial</a>.</p><h1 id="part-1---creating-the-consignmentlistcontroller-class">Part 1 - Creating the ConsignmentListController Class</h1><p>Create a controller in Apex that will be primarly used to retrieve the data by using SOQL(Salesforce Object Query Language).</p><ol><li><ul><li><strong>File</strong> &gt; <strong>New</strong> &gt; <strong>Apex Class</strong>, specify <code class="highlighter-rouge">ConsignmentListController</code> as the class name and click OK. or</li><li>In PHPStorm (with JedIDE), create a class in <code class="highlighter-rouge">classes</code> called <code class="highlighter-rouge">ConsignmentListController</code>.</li></ul></li><li>Implement the class as follows:</li></ol><figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="n">with</span> <span class="n">sharing</span> <span class="kd">class</span> <span class="nc">ConsignmentListController</span> <span class="o">{</span>

    <span class="nd">@AuraEnabled</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Consignment__c</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">[</span><span class="n">SELECT</span> <span class="n">Id</span><span class="o">,</span> <span class="n">Name__c</span><span class="o">,</span> <span class="n">Phone__c</span> <span class="n">FROM</span> <span class="n">Consignment__c</span> <span class="n">LIMIT</span> <span class="mi">50</span><span class="o">];</span>
    <span class="o">}</span>

    <span class="nd">@AuraEnabled</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Contact</span><span class="o">&gt;</span> <span class="nf">findByName</span><span class="o">(</span><span class="n">String</span> <span class="n">searchKey</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="sc">'%'</span> <span class="o">+</span> <span class="n">searchKey</span> <span class="o">+</span> <span class="sc">'%'</span><span class="o">;</span>

        <span class="k">return</span> <span class="o">[</span>
            <span class="n">SELECT</span> <span class="n">Id</span><span class="o">,</span> <span class="n">Name__c</span><span class="o">,</span> <span class="n">Phone__c</span>
            <span class="n">FROM</span> <span class="n">Consignment__c</span>
            <span class="n">WHERE</span> <span class="n">Name__c</span> <span class="n">LIKE</span> <span class="o">:</span><span class="n">name</span>
            <span class="n">LIMIT</span> <span class="mi">50</span>
        <span class="o">];</span>
    <span class="o">}</span>

    <span class="nd">@AuraEnabled</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Contact</span> <span class="nf">findById</span><span class="o">(</span><span class="n">String</span> <span class="n">consignmentId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">[</span>
            <span class="n">SELECT</span> <span class="n">Id</span><span class="o">,</span> <span class="n">Name__c</span><span class="o">,</span> <span class="n">Phone__c</span>
            <span class="n">FROM</span> <span class="n">Contact</span>
            <span class="n">WHERE</span> <span class="n">Consignment_Id</span> <span class="o">=</span> <span class="o">:</span><span class="n">consignmentId</span>
        <span class="o">];</span>
    <span class="o">}</span>

<span class="o">}</span></code></pre></figure><h3 id="notes">Notes</h3><ul><li>The @AuraEnabled method annotation makes a method available to Lightning applications</li></ul><h1 id="part-2---creating-the-quickconsignment-lightning-component">Part 2 - Creating the QuickConsignment Lightning Component</h1><h2 id="step-1---create-the-component">Step 1 - Create the component</h2><ol><li><p><strong>File</strong> &gt; <strong>New</strong> &gt; <strong>Lightning Component</strong>.</p></li><li><p>Implement the component as follows:</p></li></ol><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;aura:component</span> <span class="na">implements=</span><span class="s">"force:appHostable"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;p&gt;</span>ContactList goes here<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;/aura:component&gt;</span></code></pre></figure><h2 id="step-2---create-a-tab">Step 2 - Create a tab</h2><ol><li><strong>Create</strong> &gt; <strong>Tabs</strong></li></ol><p>In the Lightning Component Tabs section, click New</p><h1 id="part-3---creating-the-consignmentlist-component">Part 3 - Creating the ConsignmentList Component</h1><h2 id="step-1---create-the-component-1">Step 1 - Create the component</h2><ol><li><p><strong>File</strong> &gt; <strong>New</strong> &gt; <strong>Lightning Component</strong>. Specify <code class="highlighter-rouge">ConsignmentList</code> as the bundle name and click OK.</p></li><li><p>Implement the component as follows:</p></li></ol><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;aura:component</span> <span class="na">controller=</span><span class="s">"ConsignmentListController"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;aura:attribute</span> <span class="na">name=</span><span class="s">"consignments"</span> <span class="na">type=</span><span class="s">"Consignment__c[]"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;aura:handler</span> <span class="na">name=</span><span class="s">"init"</span> <span class="na">value=</span><span class="s">"{!this}"</span> <span class="na">action=</span><span class="s">"{!c.doInit}"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"slds-table slds-table_bordered slds-table_cell-buffer"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tbody&gt;</span>
            <span class="nt">&lt;aura:iteration</span> <span class="na">items=</span><span class="s">"{!v.consignments}"</span> <span class="na">var=</span><span class="s">"consignment"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;tr&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">data-label=</span><span class="s">"Id"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"slds-truncate"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{! '#/sObject/' + consignment.Id + '/view'}"</span><span class="nt">&gt;</span>
                                {!consignment.Id}
                            <span class="nt">&lt;/a&gt;</span>
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">data-label=</span><span class="s">"Order Reference"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"slds-truncate"</span><span class="nt">&gt;</span>
                            {!consignment.Name__c}
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/td&gt;</span>
                    <span class="nt">&lt;td</span> <span class="na">data-label=</span><span class="s">"Order Reference"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"slds-truncate"</span><span class="nt">&gt;</span>
                            {!consignment.Phone__c}
                        <span class="nt">&lt;/div&gt;</span>
                    <span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;/aura:iteration&gt;</span>
        <span class="nt">&lt;/tbody&gt;</span>
    <span class="nt">&lt;/table&gt;</span>

<span class="nt">&lt;/aura:component&gt;</span></code></pre></figure><h3 id="notes-1">Notes</h3><ul><li>The controller assigned to the component (first line of code) refers to the server-side controller created in the classes file.</li></ul><h2 id="step-2---implement-the-controller">Step 2 - Implement the Controller</h2><figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">({</span>
    <span class="na">doInit</span> <span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">component</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="nx">component</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">"c.findAll"</span><span class="p">);</span>

        <span class="nx">action</span><span class="p">.</span><span class="nx">setCallback</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">component</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="s2">"v.contacts"</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getReturnValue</span><span class="p">());</span>
        <span class="p">});</span>

        <span class="nx">$A</span><span class="p">.</span><span class="nx">enqueueAction</span><span class="p">(</span><span class="nx">action</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">})</span></code></pre></figure><h2 id="step-3---add-the-component-to-a-page">Step 3 - Add the component to a page</h2><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;aura:component</span> <span class="na">implements=</span><span class="s">"force:appHostable"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;c:ConsignmentList/&gt;</span>

<span class="nt">&lt;/aura:component&gt;</span></code></pre></figure><h3 id="notes-2">Notes</h3><ul><li>c. is the default namespace for Lightning components</li></ul><h1 id="part-4">Part 4</h1><p>Now that we decided to build SearchBar and ContactList as two separate components, we need a way for ContactList to know when the search key changes so that it can retrieve and display the matching contacts. Lightning Events enable that kind of communication between components. In this step, you create a Lightning Event used by the SearchBar component to notify other components when the search key changes.</p><h2 id="step-1---create-an-event">Step 1 - Create an event</h2><ol><li><p><strong>File</strong> &gt; <strong>New</strong> &gt; <strong>Lightning Event</strong></p></li><li><p>Implement the component as follows:</p></li></ol><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;aura:event</span> <span class="na">type=</span><span class="s">"APPLICATION"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;aura:attribute</span> <span class="na">name=</span><span class="s">"searchKey"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/aura:event&gt;</span></code></pre></figure><h2 id="step-2---create-a-searchbar-component">Step 2 - Create a SearchBar component</h2><ol><li><p>File &gt; New &gt; Lightning Component</p></li><li><p>Implement the component as follows:</p></li></ol><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;aura:component&gt;</span>

    <span class="nt">&lt;input</span>
        <span class="na">type=</span><span class="s">"text"</span>
        <span class="na">class=</span><span class="s">"slds-input"</span>
        <span class="na">placeholder=</span><span class="s">"search"</span>
        <span class="na">onkeyup=</span><span class="s">"{!c.searchKeyChange}"</span>
        <span class="nt">/&gt;</span>

<span class="nt">&lt;/aura:component&gt;</span></code></pre></figure><h2 id="step-3---implement-the-controller">Step 3 - Implement the Controller</h2><figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="p">({</span>
    <span class="na">searchKeyChange</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">component</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">helper</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">myEvent</span> <span class="o">=</span> <span class="nx">$A</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">"e.c:SearchKeyChange"</span><span class="p">);</span>
        <span class="nx">myEvent</span><span class="p">.</span><span class="nx">setParams</span><span class="p">({</span><span class="s2">"searchKey"</span><span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>
        <span class="nx">myEvent</span><span class="p">.</span><span class="nx">fire</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">})</span></code></pre></figure><h3 id="notes-3">Notes</h3><ul><li>Gets an instance of the <strong>SearchKeyChange</strong> event</li></ul><h2 id="step-4----listen-for-the-searchkeychange-event-in-consignmentlist">Step 4 - Listen for the SearchKeyChange Event in ConsignmentList</h2><ol><li>Go back to the ConsignmentList component.</li><li>Add the following to the existing code:</li></ol><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;aura:handler</span> <span class="na">event=</span><span class="s">"c:SearchKeyChange"</span> <span class="na">action=</span><span class="s">"{!c.searchKeyChange}"</span><span class="nt">/&gt;</span></code></pre></figure><ol><li>In the controller, add the following below <code class="highlighter-rouge">onInit</code>:</li></ol><figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">searchKeyChange</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">component</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">searchKey</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">getParam</span><span class="p">(</span><span class="s2">"searchKey"</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="nx">component</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">"c.findByName"</span><span class="p">);</span>

    <span class="nx">action</span><span class="p">.</span><span class="nx">setParams</span><span class="p">({</span>
      <span class="s2">"searchKey"</span><span class="p">:</span> <span class="nx">searchKey</span>
    <span class="p">});</span>

    <span class="nx">action</span><span class="p">.</span><span class="nx">setCallback</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">component</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="s2">"v.contacts"</span><span class="p">,</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getReturnValue</span><span class="p">());</span>
    <span class="p">});</span>

    <span class="nx">$A</span><span class="p">.</span><span class="nx">enqueueAction</span><span class="p">(</span><span class="nx">action</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure><h1 id="step-5---finish-off">Step 5 - Finish Off</h1><ol><li>Add <code class="highlighter-rouge">&lt;c:SearchBar/&gt;</code> and <code class="highlighter-rouge">&lt;c:ContactList/&gt;</code> to any page to retreive and display the component.</li></ol><figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;aura:component</span> <span class="na">implements=</span><span class="s">"force:appHostable"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;c:SearchBar/&gt;</span>
    <span class="nt">&lt;c:ContactList/&gt;</span>

<span class="nt">&lt;/aura:component&gt;</span></code></pre></figure><div id="disqus_thread"></div><script defer> (function() { var d = document, s = d.createElement('script'); s.src = '//tuanb-me.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><footer><div class="links"> <a href="/contact/">Contact</a></div><div class="theme" onclick="theme()" style=" background-image: url(/images/theme.svg)"></div></footer><script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-90397102-1', 'auto'); ga('send', 'pageview');</script></body></html>
